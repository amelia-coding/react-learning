{"version":3,"sources":["src/patch.js","src/render.js","src/observe.js","src/html.js","src/h.js","src/index.js","index.js"],"names":["patch","parent","element","oldVnode","vnode","insertBefore","create","type","props","update","reusableChildren","oldElements","newKeys","children","forEach","oldChild","index","oldElement","childNodes","oldKey","key","i","j","length","newChild","newKey","reusableChild","removeChild","reusableNode","replaceChild","document","createTextNode","createElement","child","appendChild","name","setAttrs","oldProps","cloneProps","node","value","String","match","toLowerCase","tagName","toUpperCase","setAttribute","style","cssText","root","lock","mount","vdom","el","rerender","setTimeout","override","Object","deleted","observe","state","keys","proxy","obj","get","Proxy","_","set","val","CACHE","TEMPLATE","reg","html","statics","tpl","build","arguments","str","innerHTML","replace","a","s","c","trim","Function","walk","content","firstChild","n","nodeType","data","field","nodeName","localName","sub","start","attributes","substring","nextSibling","sep","matches","strValue","JSON","stringify","h","htm","bind","app","body"],"mappings":"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","file":"fre.e31bb0bc.map","sourceRoot":"..","sourcesContent":["export function patch(parent, element, oldVnode, vnode) {\n  if (oldVnode == vnode) {\n  } else if (oldVnode == null) {\n    element = parent.insertBefore(create(vnode), element)\n  } else if (vnode.type && vnode.type === oldVnode.type) {\n    if (typeof vnode.type === 'function') {\n      vnode = vnode.type(vnode.props)\n      oldVnode = oldVnode.type(oldVnode.props)\n      patch(parent, element, oldVnode, vnode)\n    }\n    update(element, oldVnode.props, vnode.props)\n\n    var reusableChildren = {}\n    var oldElements = []\n    var newKeys = {}\n\n    oldVnode.children.forEach((oldChild, index) => {\n      var oldElement = element.childNodes[index]\n      oldElements[index] = oldElement\n      var oldKey = oldChild.props ? oldChild.props.key : null\n\n      if (null != oldKey) {\n        reusableChildren[oldKey] = [oldElement, oldChild]\n      }\n    })\n\n    var i = 0\n    var j = 0\n\n    while (j < vnode.children.length) {\n      var oldElement = oldElements[i]\n      var oldChild = oldVnode.children[i]\n      var newChild = vnode.children[j]\n\n      var oldKey = oldChild.props ? oldChild.props.key : null\n      var newKey = newChild.props ? newChild.props.key : null\n\n      var reusableChild = reusableChildren[newKey] || []\n\n      if (null == newKey) {\n        if (null == oldKey) {\n          patch(element, oldElement, oldChild, newChild)\n          j++\n        }\n        i++\n      } else {\n        if (oldKey === newKey) {\n          patch(element, reusableChild[0], reusableChild[1], newChild)\n          i++\n        } else if (reusableChild[0]) {\n          element.insertBefore(reusableChild[0], oldElement)\n          patch(element, reusableChild[0], reusableChild[1], newChild)\n        } else {\n          patch(element, oldElement, null, newChild)\n        }\n\n        j++\n        newKeys[newKey] = newChild\n      }\n    }\n\n    while (i < oldVnode.children.length) {\n      var oldChild = oldVnode.children[i]\n      var oldKey = oldChild.props ? oldChild.props.key : null\n      if (null == oldKey) {\n        element.removeChild(reusableChild[0])\n      }\n      i++\n    }\n\n    for (let i in reusableChildren) {\n      var reusableChild = reusableChildren[i]\n      var reusableNode = reusableChild[1]\n      if (!newKeys[reusableNode.props.key]) {\n        element.removeChild(reusableChild[0])\n      }\n    }\n  } else if (oldVnode !== vnode) {\n    var i = element\n    parent.replaceChild((element = create(vnode)), i)\n  }\n\n  return element\n}\n\nexport function create(vnode) {\n  if (typeof vnode.type === 'function') {\n    vnode = vnode.type(vnode.props, ...vnode.children)\n  }\n  let element =\n    typeof vnode === 'string' || typeof vnode === 'number'\n      ? document.createTextNode(vnode)\n      : document.createElement(vnode.type)\n\n  if (vnode.props) {\n    vnode.children.forEach(child => {\n      element.appendChild(create(child))\n    })\n\n    for (let name in vnode.props) {\n      setAttrs(element, name, vnode.props[name])\n    }\n  }\n\n  return element\n}\n\nfunction update(element, oldProps, props) {\n  let cloneProps = { ...oldProps, ...props }\n  for (let name in cloneProps) {\n    setAttrs(element, name, cloneProps[name])\n  }\n}\n\nfunction setAttrs(node, name, value) {\n  switch (name) {\n    case String(name.match(/on\\w+/)):\n      name = name.toLowerCase()\n      node[name] = value || ''\n      break\n    case 'className':\n      name === 'class'\n      break\n    case 'key':\n      break\n    case 'value':\n      if (\n        node.tagName.toUpperCase() === 'INPUT' ||\n        node.tagName.toUpperCase() === 'TEXTAREA'\n      ) {\n        node.value = value\n      } else {\n        node.setAttribute(name, value)\n      }\n      break\n    case 'style':\n      node.style.cssText = value\n      break\n    default:\n      node.setAttribute(name, value)\n  }\n}\n","import { patch } from './patch'\n\nlet parent, element, oldVnode, vnode, root, lock\n\nexport function mount(vdom, el) {\n  root = vdom\n  parent = el\n  vnode = vdom.type()\n  rerender()\n}\n\nexport function rerender() {\n  vnode = root.type(root.props)\n  if (!lock) {\n    lock = true\n    setTimeout(() => {\n      lock = !lock\n      element = patch(parent, element, oldVnode, (oldVnode = vnode))\n    })\n  }\n}\n","import { rerender } from './render'\n\nconst override = Object.create(null)\nconst deleted = Object.create(null)\n\nexport function observe(state) {\n  if (Object.keys(override).length > 0) {\n    state = { ...state,...override }\n  }\n\n  return proxy(state)\n}\n\nfunction proxy(obj) {\n  function get(key) {\n    let value\n    if (!deleted[key]) value = override[key] || obj[key]\n    if (typeof value === 'object') {\n      value = proxy(value)\n      override[key] = value\n    }\n    return value\n  }\n\n  return new Proxy({}, {\n    get(_, key) {\n      return get(key)\n    },\n    set(_, key, val) {\n      override[key] = val\n      delete deleted[key]\n      rerender()\n      return true\n    }\n  })\n}\n","// complie tagged template to vnode , thanks htm\n\nconst CACHE = {}\nconst TEMPLATE = document.createElement('template')\nconst reg = /(\\$_h\\[\\d+\\])/g\n\nexport default function html(statics) {\n  const tpl = CACHE[statics] || (CACHE[statics] = build(statics))\n  return tpl(this, arguments)\n}\n\nfunction build(statics) {\n  let str = statics[0],\n    i = 1\n  while (i < statics.length) {\n    str += '$_h[' + i + ']' + statics[i++]\n  }\n  TEMPLATE.innerHTML = str\n    .replace(/<(?:(\\/)\\/|(\\/?)(\\$_h\\[\\d+\\]))/g, '<$1$2c c@=$3')\n    .replace(/<([\\w:-]+)(?:\\s[^<>]*?)?(\\/?)>/g,(str, name, a) => str.replace(/(?:'.*?'|\".*?\"|([A-Z]))/g, (s, c) => (c ? ':::' + c : s)) + (a ? '</' + name + '>' : ''))\n    .replace(/[\\r\\n]|\\ \\ +/g,'')\n    .trim()\n    \n  return Function('h','$_h','return ' + walk((TEMPLATE.content || TEMPLATE).firstChild))\n}\n\nfunction walk(n) {\n  if (n.nodeType != 1) {\n    if (n.nodeType == 3 && n.data) return field(n.data, ',')\n    return 'null'\n  }\n\n  let str = '',\n    nodeName = field(n.localName, str),\n    sub = '',\n    start = ',({'\n\n  for (let i = 0; i < n.attributes.length; i++) {\n    const name = n.attributes[i].name\n    const value = n.attributes[i].value\n\n    if (name == 'c@') {\n      nodeName = value\n    } else if (name.substring(0,3) == '...') {\n      sub = ''\n      start = ',Object.assign({'\n      str += '},' + name.substring(3) + ',{'\n    } else {\n      str += `${sub}\"${name.replace(/:::(\\w)/g, (s, i) => i.toUpperCase())}\":${value ? field(value, '+') : true}`\n      sub = ','\n    }\n  }\n\n  str = 'h(' + nodeName + start + str + '})'\n  let child = n.firstChild\n  while (child) {\n    str += ',' + walk(child)\n    child = child.nextSibling\n  }\n\n  return str + ')'\n}\n\nfunction field(value, sep) {\n  const matches = value.match(reg)\n  let strValue = JSON.stringify(value)\n  \n  if (matches != null) {\n    if (matches[0] === value) return value\n    strValue = strValue.replace(reg, `\"${sep}$1${sep}\"`).replace(/\"[+,]\"/g, '')\n    if (sep == ',') strValue = `[${strValue}]`\n  }\n\n  return strValue\n}\n","import htm from './html'\n\nexport function h(type, props, ...children) {\n  return {\n    type,\n    props,\n    key: props.key || null,\n    children\n  }\n}\n\nexport const html = htm.bind(h)","import { observe } from './observe'\nimport { html, h } from './h'\nimport { mount } from './render'\n\nexport { observe, html, h, mount }\n","import{ mount, html, observe } from './src'\n\nfunction app() {\n\n  return html`\n    <div class=main>\n      <section class=top>\n        <div class=logo>\n          <img src=\"https://ws1.sinaimg.cn/large/0065Zy9egy1fygjdcy3u5j3096097weo.jpg\"/>\n          <p><b>Fre</b> - 又一个小而美的前端 MVVM 框架.</p>\n          <div class=option>\n            <a href=\"https://github.com/132yse/fre#use\">起步</a>\n            <a href=\"https://github.com/132yse/fre\">github</a>\n          </div>\n        </div>\n      </section>\n    </div>\n  `\n}\n\nmount(html`<${app} />`, document.body)\n"]}